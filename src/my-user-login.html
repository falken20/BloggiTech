<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">

<link href="src/sticky.css" rel="stylesheet" type="text/css"/>
<link href="src/login.css" rel="stylesheet" type="text/css"/>

<dom-module id="my-user-login">
  <template>
    <style>
      :host {  /* Para referenciar el estilo de mi componente */
        display: inline-block;
        background-color: white;
        width: -moz-available;
        align-items: center;
      }
    </style>

    <div class="col-sm-4 col-md-4">
      <div class="sticky">
          <h1>Welcome to BloggiTech!</h1>
          <p><small>Only be Tech</small></p>
      </div>      <div class="container">
        <div class="login-container">
                  <div id="output"></div>
                  <div class="avatar"><img src="https://cdn1.iconfinder.com/data/icons/big-rocket/80/BigRocket-1-01-512.png" width="100px" height="100px"></div>
                  <div class="form-box">
                      <form action="" method="">
                          <input name="usernameInput" type="text" placeholder="username">
                          <input name="passwordInput" type="password" placeholder="password">
                          <button class="btn btn-info btn-block login" type="button" name="btnRemoveUser" on-click="loginUser">Login</button>
                          <p><small>No account? <a href="user-add">Create one!</a></small></p>
                      </form>
                  </div>
              </div>              
      </div>
    </div>
  </template>

  </template>
    <script>
      Polymer({
        is: 'my-user-login',
        properties: {
          url: {
            type: String,
            value: "http://postgrebc9688.cloudapp.net:3000/api/usuarios"
          },
          posts: {
            type: Array,
          }
        },
        listeners: {
        },
        removeUser: function() {
          var id = document.getElementsByName("idInput")[0].value;
          var name = document.getElementsByName("nameInput")[0].value;
          var email = document.getElementsByName("emailInput")[0].value;
          var password = document.getElementsByName("passwordInput")[0].value;
          console.log("Removing user ID: " + id + ", Name: " + name + ", Email: " + email + ", Password: " + password);
          var peticion = new XMLHttpRequest();
          var urlDelete = this.url + "/" + id;
          peticion.open("DELETE", urlDelete, true);
          peticion.setRequestHeader("Content-Type", "application/json");
          peticion.send();
          //peticion.send('{"nombre":"' + name + '", "email": "' + email + '", "password":"' + password + '"}');
          console.log("User " + id + " removed");
        }
      })
    </script>
</dom-module>
